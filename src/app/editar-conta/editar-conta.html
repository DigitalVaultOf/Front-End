<div #modalContainer class="modal-container">
  <div class="modal-header">
    <h2>Editar Conta</h2>
    <button class="close-btn" (click)="closeModal()">×</button>
  </div>

  <div class="modal-content">
    <form
      id="editUserForm"
      [formGroup]="usuarioForm"
      (ngSubmit)="atualizarUsuario()"
    >
      <div class="form-group">
        <label for="idUsuario">ID Usuário</label>
        <input type="text" id="idUsuario" formControlName="id" />
      </div>

      <div class="form-group">
        <label for="accountNumber">Número da conta</label>
        <input type="text" id="accountNumber" formControlName="accountNumber" />
      </div>

      <div class="form-group">
        <label for="cpf">CPF</label>
        <input type="text" id="cpf" formControlName="cpf" />
      </div>

      <hr class="divider" />

      <div class="form-group">
        <label for="nome">Nome</label>
        <input type="text" id="nome" formControlName="nome" />
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          autocomplete="off"
          formControlName="email"
        />
      </div>

      <hr class="divider" />

      <div class="form-group">
        <label for="senha-atual">Senha Atual</label>
        <input
          type="password"
          id="senha-atual"
          formControlName="senhaAtual"
          autocomplete="off"
        />
        <small
          *ngIf="usuarioForm.get('senhaAtual')?.hasError('senhaIncorreta')"
          style="color: red; font-weight: 500"
        >
          Senha atual incorreta.
        </small>
      </div>

      <div class="form-group">
        <label for="nova-senha">Nova Senha</label>
        <input
          type="password"
          id="nova-senha"
          formControlName="novaSenha"
          autocomplete="off"
        />
        <small
          *ngIf="
            usuarioForm.hasError('passwordMismatch') &&
            usuarioForm.get('confirmarNovaSenha')?.touched
          "
          style="color: red; font-weight: 500"
        >
          As senhas não coincidem.
        </small>
      </div>

      <div class="form-group">
        <label for="confirmar-senha">Confirmar Nova Senha</label>
        <input
          type="password"
          id="confirmar-senha"
          formControlName="confirmarNovaSenha"
          autocomplete="off"
        />

        <small
          *ngIf="
            usuarioForm.hasError('passwordMismatch') &&
            usuarioForm.get('confirmarNovaSenha')?.touched
          "
          style="color: red; font-weight: 500"
        >
          As senhas não coincidem.
        </small>
      </div>
    </form>
  </div>

  <div class="modal-footer">
    <button class="btn btn-secondary" (click)="closeModal()">Cancelar</button>
    <button
      form="editUserForm"
      type="submit"
      class="btn btn-primary"
      [disabled]="usuarioForm.invalid"
    >
      Confirmar Alterações
    </button>
  </div>
</div>
